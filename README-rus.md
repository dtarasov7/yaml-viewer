# YAML TUI Viewer

Консольный TUI-просмотрщик больших YAML-файлов с навигацией по дереву, ленивой загрузкой, фильтрацией, поиском и расширенным просмотром значений.

[![Python](https://img.shields.io/badge/Python-3.7%2B-blue?logo=python)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Security](https://img.shields.io/badge/Security-Hardened-red)](#security-features)
[![Version](https://img.shields.io/badge/Version-v1.1.0-brightgreen)](CHANGELOG.md)

<img width="1041" height="1185" alt="image" src="https://github.com/user-attachments/assets/fe4a6a09-5382-4bf7-83f5-a1cb4c61b77a" />

## Возможности

- Интерактивный просмотр YAML в виде дерева
- Ленивая загрузка больших файлов и multi-document YAML
- Просмотр значения leaf-узла с прокруткой и wrap-режимом
- Декодирование значения как Base64
- Форматирование результата, если декодированное значение является JSON
- Просмотр значения как X.509 сертификата через `openssl x509 -noout -text -nameopt utf8`
- Поиск по текущему полю, глобальный поиск и фильтрация полей
- Поддержка горячих клавиш в английской и русской раскладке
- Базовые ограничения безопасности для больших и проблемных входных данных
- Логирование ошибок в `yaml-viewer.log`

## Требования

- Python 3.8+
- Unix/Linux/macOS терминал с `curses`
- Windows: `windows-curses` или WSL
- `openssl` в `PATH` для просмотра сертификатов

## Запуск

```bash
python yaml-viewer.py file1.yaml
# или несколько файлов
python yaml-viewer.py file1.yaml file2.yaml
```


## Горячие клавиши основного экрана

| Клавиша | Действие |
|---------|----------|
| `q` / `Esc` | Выход |
| `↑` / `↓` или `j` / `k` | Перемещение курсора |
| `←` | Свернуть текущий узел |
| `→` или `l` | Развернуть текущий узел |
| `Enter` | Открыть значение или переключить узел |
| `n` / `p` | Страница вниз / вверх |
| `Home` / `End` | Первый / последний объект |
| `PgDn` / `PgUp` | Следующий / предыдущий объект |
| `w` | Переключить wrap-режим |
| `a` / `z` | Развернуть / свернуть текущий объект |
| `x` / `v` | Развернуть / свернуть все загруженные объекты |
| `g` | Перейти к объекту по номеру |
| `s` | Поиск по текущему полю |
| `u` | Глобальный поиск |
| `f` | Диалог фильтрации полей |

Примечания:
- Буквенные hotkey регистронезависимы.
- Буквенные hotkey работают в английской и русской раскладке.

## Горячие клавиши просмотра значения

| Клавиша | Действие |
|---------|----------|
| `q` / `Esc` | Закрыть просмотр |
| `↑` / `↓` | Вертикальная прокрутка |
| `←` / `→` | Горизонтальная прокрутка при выключенном wrap |
| `Home` / `End` | Переход в начало / конец |
| `PgUp` / `PgDn` | Постраничная прокрутка |
| `w` | Переключить wrap-режим |
| `b` | Декодировать значение как Base64 |
| `c` | Попробовать показать значение как X.509 сертификат |
| `r` | Вернуться к исходному значению |

Примечания:
- Если значение не является Base64, ошибка показывается в верхней строке, а в теле остаётся исходное значение.
- Если значение не является сертификатом, ошибка показывается в верхней строке, а в теле остаётся исходное значение.
## Архитектура

Ключевые сущности:

- `YamlFile` — работа с YAML‑файлом: чтение, разбиение документов, безопасный парсинг.
- `YamlNode` — узел дерева (ключ, значение, дети, раскрытие/сворачивание).
- `YamlTuiViewer` — UI/состояние: плоский список для отрисовки, скролл, курсор, поиск/фильтр.

Диаграммы PlantUML: см. `docs/diagrams/*.puml`
## Ограничения безопасности

| Ограничение | Значение |
|-------------|----------|
| Максимальная глубина YAML | 100 |
| Максимальная длина строки | 10 MB |
| Максимум цифр в числе | 4300 |
| Максимум элементов массива | 1,000,000 |
| Максимум ключей объекта | 100,000 |
| Максимальный размер файла | 10 GB |
| Таймаут regex | 2 секунды |

## История изменений

См. [CHANGELOG.md](CHANGELOG.md).

## Лицензия

MIT. См. [LICENSE](LICENSE).
